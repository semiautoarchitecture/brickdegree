ui={},ui.settingsToggle=function(){console.log("settingsToggle"),$(".settingsMenu").slideToggle()},ui.errorNotPhone=function(){$(".errormessage").html("You need to access this website on your phone."),$(".errordiv").css("display","flex")},ui.errorNoGPS=function(){$(".errormessage").html("You need to enable GPS or Location Services on your phone."),$(".errordiv").css("display","flex")},ui.updateTargetDegree=function(){var e=data.currentDegreeData(),r=e.courseN,t=e.brickN,c=e.degree,o=$("#compasses")[0].contentDocument,a={};a.s={},a.s.cx=$("g#compass-s circle",o).attr("cx"),a.s.cy=$("g#compass-s circle",o).attr("cy"),a.m={},a.m.cx=$("g#compass-m circle",o).attr("cx"),a.m.cy=$("g#compass-m circle",o).attr("cy"),a.l={},a.l.cx=$("g#compass-l circle",o).attr("cx"),a.l.cy=$("g#compass-l circle",o).attr("cy"),c>=0?($("body").removeClass("newCourse"),$(".targetdegree").html("<span class='targetNumber'>"+c+"&deg;</span><br>Course #"+courseIndex+",  Brick #"+brickIndex+" ( step "+degreeIndex+" )"),console.log("FIRED"),console.log(c),$("g#zone",o).attr({"fill-opacity":1}),$(".targetdegree").css({"background-color":"white",color:"black"})):($("g#zone",o).attr({"fill-opacity":0}),$(".targetdegree").html("Course #"+courseIndex+"<br>NEW COURSE"),$("body").addClass("newCourse"),$(".targetdegree").css({"background-color":"black",color:"white"}))},ui.setCompassBearing=function(e){var r=data.calibrateRawBearing(e);$(".degrees.calib .value").text(helpers.roundFloat(r,1)),$(".degrees.raw .value").text(helpers.roundFloat(e,1));var t=$("#compasses")[0].contentDocument,c={};c.s={},c.s.cx=$("g#compass-s circle",t).attr("cx"),c.s.cy=$("g#compass-s circle",t).attr("cy"),c.m={},c.m.cx=$("g#compass-m circle",t).attr("cx"),c.m.cy=$("g#compass-m circle",t).attr("cy"),c.l={},c.l.cx=$("g#compass-l circle",t).attr("cx"),c.l.cy=$("g#compass-l circle",t).attr("cy"),$("g#zone",t).attr({transform:"rotate("+-1*data.currentDegree()+" "+c.s.cx+" "+c.s.cy+")"}),$("g#compass-s",t).attr({transform:"rotate("+-r+" "+c.s.cx+" "+c.s.cy+")"}),$("g#compass-m",t).attr({transform:"rotate("+-r+" "+c.m.cx+" "+c.m.cy+")"}),$("g#compass-l",t).attr({transform:"rotate("+-r+" "+c.l.cx+" "+c.l.cy+")"});var o=helpers.angleDiff(r,data.currentDegree());if(helpers.debugPrint(".debug2",o),o<angleTolerance/2)$(".targetdegree").css("background-color",colorSuccess),$(".flexcontainer").css("background-color",colorSuccess),$(".nextbutton").css("background-color",colorNextButtonPress);else{helpers.debugPrint(".debug",e+" / "+data.currentDegree()+" / "+o+" <br>");var a=colorScaleFunction(o);$(".targetdegree").css("background-color",colorNot),$(".flexcontainer").css("background-color",a),$(".nextbutton").css("background-color",colorNextButtonDontPress)}},ui.init=function(){},ui.bindEvents=function(){$(".degrees.calib, .settingsMenu").on("touchstart click",function(e){return e.stopPropagation(),e.preventDefault(),e.handled===!0?!1:(data.calib=data.currentRawBearing,void(e.handled=!0))}),$(".settings .button").on("touchstart click",function(e){return e.stopPropagation(),e.preventDefault(),e.handled===!0?!1:(data.calib=bearing,void(e.handled=!0))}),$(".nextbutton").click(function(){data.incrementTargetDegreeIndex(1),$(".flashdiv").fadeIn(200).fadeOut(200)}),$(".prevbutton").click(function(){data.incrementTargetDegreeIndex(-1)})};